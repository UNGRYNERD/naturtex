!function(t){var a={};function e(i){if(a[i])return a[i].exports;var r=a[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=t,e.c=a,e.d=function(t,a,i){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},e.p="",e(e.s=5)}([,,,,,function(t,a,e){t.exports=e(6)},function(t,a,e){jQuery(function(t){Promise.resolve().then(function(){return e(7)}).then(function(){t(document).on("wc_variation_form.wvs",".variations_form:not(.wvs-pro-loaded)",function(a,e){t(this).WooVariationSwatchesPro()})})})},function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=function(){return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,a){var e=[],i=!0,r=!1,o=void 0;try{for(var n,s=t[Symbol.iterator]();!(i=(n=s.next()).done)&&(e.push(n.value),!a||e.length!==a);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return e}(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},o=function(){function t(t,a){for(var e=0;e<a.length;e++){var i=a[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(a,e,i){return e&&t(a.prototype,e),i&&t(a,i),a}}();function n(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}var s=function(t){var a={},e=function(){function e(i,r){!function(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),this._el=i,this._element=t(i),this._config=t.extend({},a,r),this._generated={},this.product_variations=this._element.data("product_variations"),this.is_ajax_variation=!this.product_variations,this.is_loop=this._element.hasClass("wvs-archive-variation-wrapper"),this.is_single_product=!this.is_loop,this._attributeFields=this._element.find(".variations select"),this._wrapper=this._element.closest(woo_variation_swatches_options.archive_product_wrapper),this._cart_button=this._wrapper.find(".wvs_add_to_cart_button"),this._cart_button_ajax=this._wrapper.find(".wvs_ajax_add_to_cart"),this._cart_button_html=this._cart_button.clone().html(),this._image=this._wrapper.find(woo_variation_swatches_options.archive_image_selector),this._price=this._wrapper.find(".price"),this._price_html=this._price.clone().html(),this._product_id=this._cart_button.data("product_id"),this._variation_shown=!1,this._resetVariations=this._element.find(".woo_variation_swatches_archive_reset_variations"),this.is_mobile=t("body").hasClass("woo-variation-swatches-on-mobile"),t.trim(woo_variation_swatches_options.archive_add_to_cart_button_selector)&&(this._cart_button=this._wrapper.find(woo_variation_swatches_options.archive_add_to_cart_button_selector),this._cart_button_ajax=this._wrapper.find(woo_variation_swatches_options.archive_add_to_cart_button_selector)),this._element.addClass("wvs-pro-loaded"),this.init(),t(document).trigger("woo_variation_swatches_pro",[this._element])}return o(e,[{key:"init",value:function(){this.archiveCatalogHoverEvent(),this.setDefaultTemplate(),this.archiveEvents(),this.clickableVariationURL(),this.variationImagePreview(),this.showStockLabel(),this._element.trigger("woo_variation_swatches_pro_init",[this,this.product_variations]),t(document).trigger("woo_variation_swatches_pro_loaded",[this._element,this.product_variations])}},{key:"variationImagePreview",value:function(){var t=woo_variation_swatches_options.single_variation_preview_attribute;this.is_single_product&&woo_variation_swatches_options.enable_single_variation_preview&&woo_variation_swatches_options.single_variation_preview_attribute&&(this._attributeFieldSingle=this._element.find(".variations select#"+t),this.changeSingleAttributeImage()),this.is_loop&&woo_variation_swatches_options.enable_single_variation_preview_archive&&woo_variation_swatches_options.enable_single_variation_preview&&woo_variation_swatches_options.single_variation_preview_attribute&&(this._attributeFieldSingle=this._element.find(".variations select#"+t),this.changeSingleAttributeImage())}},{key:"clickableVariationURL",value:function(){this.is_single_product&&woo_variation_swatches_options.enable_linkable_variation_url&&this.generateVariationURL()}},{key:"generateVariationURL",value:function(){var a=this,e=new URL(window.location.toString()),i=e.searchParams.toString(),o=e.origin+e.pathname;this._element.on("check_variations.wc-variation-form",function(n){var s=void 0;woo_variation_swatches_options.wc_bundles_enabled?(e=new URL(window.location.toString()),i=e.searchParams.toString(),s=a.getChosenAttributesBundleSupport()):s=a.getChosenAttributes();var _=Object.keys(s).reduce(function(t,a){return s[a]&&(t[a]=s[a]),t},{}),c=[].concat(function(t){if(Array.isArray(t)){for(var a=0,e=Array(t.length);a<t.length;a++)e[a]=t[a];return e}return Array.from(t)}(new URLSearchParams(i).keys())).reduce(function(t,a){return t[a]=new URLSearchParams(i).get(a),t},{}),h=r({},c,_),l=t.param(h);window.history.pushState({},"",a.addQueryArg(o,l))})}},{key:"setDefaultTemplate",value:function(){if(this.is_single_product)return!1;var t=this._element.data("product_variations"),a=this.getChosenAttributesAll(),e=a.data;if(a.count&&a.count===a.chosenCount){var i=this.findMatchingVariations(t,e).shift();this.archiveImageUpdate(i),this.archiveTemplateUpdate(i)}}},{key:"archiveCatalogHoverEvent",value:function(){var a=this;this._element.find("ul.variable-items-wrapper.wvs-catalog-variable-wrapper > li:not(.disabled):not(.woo-variation-swatches-variable-item-more)").each(function(e,i){t(this).off("wvs-selected-item.catalog-image-hover"),t(this).off("wvs-selected-item.catalog-image-click"),t(this).off("mouseenter.catalog-image-hover"),t(this).off("mouseleave.catalog-image-hover"),t(this).off("click.linkable"),"hover"===woo_variation_swatches_options.catalog_mode_event&&(t(this).on("mouseenter.catalog-image-hover",function(e){e.stopPropagation(),t(this).trigger("click").trigger("focusin"),a.is_mobile&&t(this).trigger("touchstart")}),woo_variation_swatches_options.linkable_attribute&&t(this).on("click.linkable",function(a){if(void 0!==a.originalEvent){var e=t(this).attr("data-url");e&&location.replace(e)}}))})}},{key:"archiveEvents",value:function(){var a=this;if(this.is_single_product)return!1;this._element.off("found_variation.wvs"),this._element.off("reset_data.wvs"),this._cart_button_ajax.off("click.wvs"),this._element.on("found_variation.wvs",function(t,e){t.preventDefault(),t.stopPropagation(),a.archiveImageUpdate(e),a.archiveTemplateUpdate(e)}),this._element.on("reset_data.wvs",function(t){t.preventDefault(),t.stopPropagation(),0===a.getChosenAttributesAll().chosenCount&&(a.archiveImageUpdate(),a.archiveTemplateReset())}),this._element.on("wvs_single_attribute_chosen.wvs",function(t,e){a.archiveImageUpdate(e)}),this._cart_button_ajax.on("click.wvs",function(a){var e=t(this);if(woo_variation_swatches_options.enable_catalog_mode)return!0;if(!e.data("variation_id"))return!0;a.preventDefault(),a.stopPropagation(),e.removeClass("added"),e.addClass("loading");var i={action:"wvs_add_variation_to_cart"};t.each(e.data(),function(t,a){i[t]=a}),t(document.body).trigger("adding_to_cart",[e,i]),t.post(wc_add_to_cart_variation_params.ajax_url.toString(),i,function(a){a&&(a.error&&a.product_url?window.location=a.product_url:"yes"!==wc_add_to_cart_params.cart_redirect_after_add?t(document.body).trigger("added_to_cart",[a.fragments,a.cart_hash,e]):window.location=wc_add_to_cart_params.cart_url)})})}},{key:"archiveTemplateReset",value:function(){var t=this._wrapper.find(".price"),a=this._wrapper.find(".added_to_cart"),e=this._wrapper.find(".added_to_cart_button");t.html(this._price_html),this._cart_button.data("variation_id",""),this._cart_button.data("variation",""),woo_variation_swatches_options.enable_catalog_mode||(woo_variation_swatches_options.archive_add_to_cart_select_options?this._cart_button.html(woo_variation_swatches_options.archive_add_to_cart_select_options):wc_add_to_cart_variation_params.i18n_select_options.trim()&&this._cart_button.text(wc_add_to_cart_variation_params.i18n_select_options),"no"===wc_add_to_cart_variation_params.enable_ajax_add_to_cart&&this._cart_button.prop("href",this._cart_button.data("product_permalink"))),this._cart_button.removeClass("added"),a.length>0&&a.remove(),e.length>0&&e.remove()}},{key:"archiveImageUpdate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&t.image&&t.image.thumb_src&&t.image.thumb_src.length>1?(this._image.wc_set_variation_attr("src",t.image.thumb_src),this._image.wc_set_variation_attr("height",t.image.thumb_src_h),this._image.wc_set_variation_attr("width",t.image.thumb_src_w),this._image.wc_set_variation_attr("srcset",t.image.thumb_srcset),this._image.wc_set_variation_attr("sizes",t.image.thumb_sizes),this._image.wc_set_variation_attr("title",t.image.title),this._image.wc_set_variation_attr("alt",t.image.alt)):(this._image.wc_reset_variation_attr("src"),this._image.wc_reset_variation_attr("width"),this._image.wc_reset_variation_attr("height"),this._image.wc_reset_variation_attr("srcset"),this._image.wc_reset_variation_attr("sizes"),this._image.wc_reset_variation_attr("title"),this._image.wc_reset_variation_attr("alt"))}},{key:"archiveTemplateUpdate",value:function(a){var e="",i=this._wrapper.find(".added_to_cart"),o=this._wrapper.find(".added_to_cart_button"),n=this._wrapper.find(".price");if(e=(e=(e=(a.variation_is_visible?wp.template("wvs-variation-template"):wp.template("unavailable-variation-template"))({variation:a,price_html:t(a.price_html).unwrap().html()||this._price_html})).replace("/*<![CDATA[*/","")).replace("/*]]>*/",""),n.html(e),this._cart_button.data("variation_id",a.variation_id),this._cart_button.data("variation",this.getChosenAttributes()),!woo_variation_swatches_options.enable_catalog_mode&&(woo_variation_swatches_options.archive_add_to_cart_text?this._cart_button.html(woo_variation_swatches_options.archive_add_to_cart_text):wc_add_to_cart_variation_params.i18n_add_to_cart.trim()&&this._cart_button.text(wc_add_to_cart_variation_params.i18n_add_to_cart),"no"===wc_add_to_cart_variation_params.enable_ajax_add_to_cart)){var s=t.param(r({},this.getChosenAttributes(),{"add-to-cart":this._product_id,variation_id:a.variation_id}));this._cart_button.prop("href",this.addQueryArg(this._cart_button.data("add_to_cart_url"),s))}this._cart_button.removeClass("added"),i.length>0&&i.remove(),o.length>0&&o.remove()}},{key:"getChosenAttributesBundleSupport",value:function(){var a={};return this._attributeFields.each(function(){var e=t(this).attr("name"),i=t(this).val()||"";i.length>0&&0,0,a[e]=i}),a}},{key:"getChosenAttributes",value:function(){var a={};return this._attributeFields.each(function(){var e=t(this).data("attribute_name")||t(this).attr("name"),i=t(this).val()||"";i.length>0&&0,0,a[e]=i}),a}},{key:"addQueryArg",value:function(t,a){if(a){a=(a=a.trim().replace(/^(\?|#|&)/,"").replace(/(\?|#|&)$/,""))?"?"+a:a;var e=t.split(/[\?\#]/)[0];a&&/\:\/\/[^\/]*$/.test(e)&&(e+="/");var i=t.match(/(\#.*)$/);t=e+a,i&&(t+=i[0])}return t}},{key:"changeSingleAttributeImage",value:function(){var t=this;this._attributeFieldSingle.on("change.wvs",function(a){var e=t.getChosenAttributesAll(),i=t.getChosenAttributesSingle().data;if(e.count>1&&1===e.chosenCount){var r=t._element.data("product_variations"),o=t.findMatchingVariations(r,i).shift();o&&_.delay(function(){t._element.wc_variations_image_update(o),t._element.trigger("wvs_pro_single_preview_found_variation",[t,o]),t._element.trigger("wvs_single_attribute_chosen",[o,t]),t._element.trigger("show_variation",[o,!1])},1)}})}},{key:"findStockLabelVariation",value:function(t,a){var e=[],r=!0,o=!1,s=void 0;try{for(var c,h=Object.entries(a.data)[Symbol.iterator]();!(r=(c=h.next()).done);r=!0){var l=c.value,u=i(l,2),v=u[0];if(0===u[1].length){var d=this._element.find("ul[data-attribute_name="+v+"]").data("attribute_values")||[],f=!0,p=!1,m=void 0;try{for(var w,g=d[Symbol.iterator]();!(f=(w=g.next()).done);f=!0){var b=w.value,y=_.extend(a.data,n({},v,b)),k=this.findMatchingVariations(t,y);if(k.length>0){var C=k.shift(),A={};A.attribute_name=v,A.attribute_value=b,A.variation=C,e.push(A)}}}catch(t){p=!0,m=t}finally{try{!f&&g.return&&g.return()}finally{if(p)throw m}}}}}catch(t){o=!0,s=t}finally{try{!r&&h.return&&h.return()}finally{if(o)throw s}}return e}},{key:"resetStockLabel",value:function(){this._element.find(".variable-item").removeClass("wvs-show-stock-left-info"),this._element.find(".wvs-stock-left-info").attr("data-wvs-stock-info","")}},{key:"showStockLabel",value:function(){var t=this;if(this.is_loop&&!woo_variation_swatches_options.show_variation_stock_info)return!1;var a=parseInt(woo_variation_swatches_options.stock_label_display_threshold),e=this._element.data("product_variations");this.getChosenAttributesAll();this._element.on("wvs-selected-item.wc-variation-form","li.variable-item:not(.radio-variable-item):not(.woo-variation-swatches-variable-item-more)",function(i){var r=t.getChosenAttributesAll();(r.count>1&&r.count===r.chosenCount&&t.resetStockLabel(),r.count>1&&r.count===r.mayChosenCount)&&t.findStockLabelVariation(e,r).forEach(function(e){var i='[data-attribute_name="'+e.attribute_name+'"] > [data-value="'+e.attribute_value+'"]';e.variation.is_in_stock&&e.variation.max_qty&&e.variation.wvs_stock_left&&e.variation.max_qty<=a?(t._element.find(i+" .wvs-stock-left-info").attr("data-wvs-stock-info",e.variation.wvs_stock_left),t._element.find(i).addClass("wvs-show-stock-left-info")):(t._element.find(i).removeClass("wvs-show-stock-left-info"),t._element.find(i+" .wvs-stock-left-info").attr("data-wvs-stock-info",""))})}),this._element.on("reset_data.wvs",function(a){a.stopImmediatePropagation();var e=t.getChosenAttributesAll();e.count>1&&e.chosenCount<1&&t.resetStockLabel()})}},{key:"getChosenAttributesAll",value:function(){var a={},e=0,i=0;return this._attributeFields.each(function(){var r=t(this).data("attribute_name")||t(this).attr("name"),o=t(this).val()||"";o.length>0&&i++,e++,a[r]=o}),{count:e,chosenCount:i,mayChosenCount:i+1,data:a}}},{key:"getChosenAttributesSingle",value:function(){var a={},e=0,i=0;return this._attributeFieldSingle.each(function(){var r=t(this).data("attribute_name")||t(this).attr("name"),o=t(this).val()||"";o.length>0&&i++,e++,a[r]=o}),{count:e,chosenCount:i,data:a}}},{key:"findMatchingVariations",value:function(t,a){for(var e=[],i=0;i<t.length;i++){var r=t[i];this.isMatch(r.attributes,a)&&e.push(r)}return e}},{key:"isMatch",value:function(t,a){var e=!0;for(var i in t)if(t.hasOwnProperty(i)){var r=t[i],o=a[i];void 0!==r&&void 0!==o&&0!==r.length&&0!==o.length&&r!==o&&(e=!1)}return e}}],[{key:"_jQueryInterface",value:function(t){return this.each(function(){new e(this,t)})}}]),e}();return t.fn.WooVariationSwatchesPro=e._jQueryInterface,t.fn.WooVariationSwatchesPro.Constructor=e,t.fn.WooVariationSwatchesPro.noConflict=function(){return t.fn.WooVariationSwatchesPro=t.fn.WooVariationSwatchesPro,e._jQueryInterface},e}(jQuery);a.default=s}]);